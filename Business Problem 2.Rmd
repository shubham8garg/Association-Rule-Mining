---
title: "For Data Scientist Intern at Drizly - Shubham Garg"
output: html_notebook
---

Assumed Business Problem - 

1. Which drink should be shown on the first web page?

2. After customer select first drink, which drink should be shown to him as recommendation?

Solution -

With Association rule mining in transactions data from the company, we can solve the above mentioned business problem to check which drink is being purchased the most? Also, we will check out association rules for different drink.


Example taken -

In this example, Groceries dataset is taken as an example.

[Link to download the dataset](https://s3.amazonaws.com/groceries-dataset/groceries.csv)

Each row contains various elements purchased in a single transaction.

Let's read the dataset and explore the dataset -
```{r}
library(arules)
dataset <- read.transactions('C:/Users/shubh/Documents/Excel/groceries.csv', sep=',', rm.duplicates = TRUE)
```


Here, rm.duplicates = TRUE denotes to remove the duplicates from transactions.
Now, let's check out number of rows and columns in dataset

```{r}
dataset
```

For association rule mining, dataset should be in the form of transactions which is denoted above.
Let's check out summary of dataset - 

```{r}
summary(dataset)
```

Here it denotes the summary of the dataset.
It shows - *whole milk* is the most purchased item with 2513 transactions containing *whole milk*,
then, second item is *other vegetables* with 1903 transactions having that.

Also, it shows minimum number of items in a transaction is 1, while 23 is the maximum items in a transaction.
On an average, every transaction contain 4 to 5 items, which is shown by *mean*.

Now, let's plot this information -
```{r}
itemFrequencyPlot(dataset, topN = 20)
```

In this diagram, we printed top 20 purchased items.
We can change the value of topN variable and check more items.
On Y axis, it shows the support of particular variable.

Now, let's check the association rules by *Apriori Algorithm* -
```{r}
rules <- apriori(data = dataset, parameter = list(support = 0.03, confidence = 0.2))
```

From this, we can check that there are 26 association rules created by the algorithm.
We can change the parameter containing minimum support and confidence level to increase the number of rules created.
Generally, Support and confidence depends on the business problem.

Let's check out the 26 association rules which are created.
```{r}
inspect(sort(rules, by = 'lift'))
```

These rules represent the probability of purchase of *rhs* product when *lhs* product is chosen.

For example - 
From the third rule - 

[3]  {sausage}            => {rolls/buns}       0.03060498   0.3257576     1.7710480

Lift is mentioned as 1.77 which means that probability of purchase of *rolls/buns*, when *sausage* is purchased, is 77% more than other items.

Let's visualize the rules -
```{r}
library(arulesViz)
plot(rules)
```
Graph plot of the rules can generated by-
```{r}
plot(rules,method="graph",interactive=TRUE,shading=NA)
```

This plot of the rules is generated separately in a new window, which is attached with the email as *Rules image.jpeg*



So, with this approach we can solve the business problem of which product can be shown as recomendation.


